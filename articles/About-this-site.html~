---
title: "About this site / and more"
date: 2020-08-23 Dim 13:56
layout: post
categories: 
- blog
tags: 
- article 
- jekyll 
- emacs 
- orgmode
published: true
comments: 
---
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org6d77bf0">1. emacs Customization</a></li>
<li><a href="#orgd687d37">2. Editing and exporting Tricks</a>
<ul>
<li><a href="#org7983109">2.1. Edition</a>
<ul>
<li><a href="#orgd586357">2.1.1. The date of today</a></li>
<li><a href="#org3e650c5">2.1.2. Verbatim</a></li>
<li><a href="#orgab01d3e">2.1.3. No export</a></li>
<li><a href="#orgddbcb26">2.1.4. Templates</a></li>
<li><a href="#orgc9b05be">2.1.5. TOC</a></li>
<li><a href="#org969667c">2.1.6. Images</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org7cfdbe2">3. Exporting issue</a></li>
<li><a href="#org331b77c">4. Publishing</a></li>
<li><a href="#org7c4a36e">5. Latex</a>
<ul>
<li><a href="#orgd38ac92">5.1. Equation</a></li>
<li><a href="#org456c595">5.2. Latex definition (for both html/jekyll and latex export)</a></li>
</ul>
</li>
<li><a href="#org0590ac9">6. Bibtex</a>
<ul>
<li><a href="#org434f55d">6.1. The "pdf to latex" process</a></li>
<li><a href="#orgeaca59e">6.2. in your orgfile</a></li>
<li><a href="#org6201b87">6.3. export</a></li>
</ul>
</li>
<li><a href="#org8f35167">7. Setting the path : find the right latex and other useful tools</a></li>
<li><a href="#org1ad43ec">8. Examples</a></li>
</ul>
</div>
</div>
<hr>



<p>
This site is generated by <a href="https://jekyllrb.com/">Jekyll</a> (3.5.1), using <a href="http://orgmode.org/">org-mode</a> (9.0.3) with  ox-jekyll (included in the <a href="https://github.com/yoshinari-nomura/org-octopress">org-octopress</a> org-octopress emacs package). The theme derives from the so-simple-theme. 
</p>

<div id="outline-container-org6d77bf0" class="outline-2">
<h2 id="org6d77bf0"><span class="section-number-2">1</span> emacs Customization</h2>
<div class="outline-text-2" id="text-1">
<p>
From ox-jekyll, I redefined the function
"org-jekyll-insert-export-options-template" as post this way 
</p>

<div class="org-src-container">
<pre class="src src-lisp">(<span style="color: #00ffff;">defun</span> <span style="color: #87cefa;">post</span>
  (<span style="color: #98fb98;">&amp;optional</span> title date setupfile categories tags published layout)
  <span style="color: #ffa07a;">"Insert a settings template for Jekyll exporter."</span>
  (interactive)
  (<span style="color: #00ffff;">let</span> ((layout     (or layout org-jekyll-layout))
        (published  (or published org-jekyll-published))
        (tags       (or tags org-jekyll-tags))
        (categories (or categories org-jekyll-categories)))
    (save-excursion
      (insert (format (concat
                       <span style="color: #ffa07a;">"#+TITLE: "</span>             title
                       <span style="color: #ffa07a;">"\n#+DATE: "</span>              date
                       <span style="color: #ffa07a;">"\n#+SETUPFILE: "</span>         setupfile
                       <span style="color: #ffa07a;">"\n#+JEKYLL_LAYOUT: "</span>     layout
                       <span style="color: #ffa07a;">"\n#+JEKYLL_CATEGORIES: "</span> categories
                       <span style="color: #ffa07a;">"\n#+JEKYLL_TAGS: "</span>       tags
                       <span style="color: #ffa07a;">"\n#+JEKYLL_PUBLISHED: "</span>  published
                       <span style="color: #ffa07a;">"\n\n* \n\n"</span>))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd687d37" class="outline-2">
<h2 id="orgd687d37"><span class="section-number-2">2</span> Editing and exporting Tricks</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org7983109" class="outline-3">
<h3 id="org7983109"><span class="section-number-3">2.1</span> Edition</h3>
<div class="outline-text-3" id="text-2-1">
</div>
<div id="outline-container-orgd586357" class="outline-4">
<h4 id="orgd586357"><span class="section-number-4">2.1.1</span> The date of today</h4>
<div class="outline-text-4" id="text-2-1-1">
<pre class="example">
{ { { time(%Y-%m-%d %a %H:%M) } } }
</pre>

<p>
Just remove space between brackets 
</p>
</div>
</div>

<div id="outline-container-org3e650c5" class="outline-4">
<h4 id="org3e650c5"><span class="section-number-4">2.1.2</span> Verbatim</h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
Start a line with ": "
</p>
<pre class="example">
: Verbatim line 
</pre>
</div>
</div>
<div id="outline-container-orgab01d3e" class="outline-4">
<h4 id="orgab01d3e"><span class="section-number-4">2.1.3</span> No export</h4>
<div class="outline-text-4" id="text-2-1-3">
<p>
To skip a sub-tree entry from export, just add the tag <i>noexport</i>. 
</p>
</div>
</div>
<div id="outline-container-orgddbcb26" class="outline-4">
<h4 id="orgddbcb26"><span class="section-number-4">2.1.4</span> Templates</h4>
<div class="outline-text-4" id="text-2-1-4">
<p>
To insert template, for instance 
</p>
<pre class="example">
#+BEGIN_SRC ... #+END_SRC, 
</pre>

<p>
just type 
</p>
<pre class="example">
&lt;s C-i (or tab, M-tab)
</pre>

<p>
The full list of built-in template are <a href="https://orgmode.org/org.html#Structure-Templates">here</a>. You need for these shortcut the <i>org-tempo</i> module. 
</p>


<pre class="example">
s 	#+BEGIN_SRC ... #+END_SRC
e 	#+BEGIN_EXAMPLE ... #+END_EXAMPLE
q 	#+BEGIN_QUOTE ... #+END_QUOTE
v 	#+BEGIN_VERSE ... #+END_VERSE
c 	#+BEGIN_CENTER ... #+END_CENTER
l 	#+BEGIN_LaTeX ... #+END_LaTeX
L 	#+LaTeX:
h 	#+BEGIN_HTML ... #+END_HTML
H 	#+HTML:
a 	#+BEGIN_ASCII ... #+END_ASCII
A 	#+ASCII:
i 	#+INDEX: line
I 	#+INCLUDE: line 
</pre>
</div>
</div>

<div id="outline-container-orgc9b05be" class="outline-4">
<h4 id="orgc9b05be"><span class="section-number-4">2.1.5</span> TOC</h4>
<div class="outline-text-4" id="text-2-1-5">
<ul class="org-ul">
<li>If you want to remove the table of contents, just add in the header:</li>
</ul>
<pre class="example">
#+OPTIONS: toc:nil
</pre>

<p>
See <a href="http://orgmode.org/manual/Table-of-contents.html">this page</a> for more details about table of contents and settings. 
</p>

<ul class="org-ul">
<li>If you want to disable numbering of headings, add :</li>
</ul>
<pre class="example">
#+options: num:nil
</pre>


<ul class="org-ul">
<li>If you want place the TOC where you want :</li>
</ul>
<p>
First remove it from option
</p>
<pre class="example">
#+OPTIONS: toc:nil
</pre>

<p>
Then add it like that where you want: 
</p>
<pre class="example">
#+TOC: headlines 1
</pre>
</div>
</div>


<div id="outline-container-org969667c" class="outline-4">
<h4 id="org969667c"><span class="section-number-4">2.1.6</span> Images</h4>
<div class="outline-text-4" id="text-2-1-6">
<ul class="org-ul">
<li>To insert image, I just insert html code:</li>
</ul>
<pre class="example">
#+BEGIN_EXPORT html
&lt;img src="/assets/figs/gauss_err.png" alt="bla" style="width:400px; margin:0px auto;display:block"/&gt;
#+END_EXPORT 
</pre>

<p>
And the image is stored in a subdir of <i>assets</i>. 
</p>


<img src="/assets/figs/gauss_err.png" alt="bla" style="width:400px; margin:0px auto;display:block"/>
</div>
</div>
</div>
</div>

<div id="outline-container-org7cfdbe2" class="outline-2">
<h2 id="org7cfdbe2"><span class="section-number-2">3</span> Exporting issue</h2>
<div class="outline-text-2" id="text-3">
<p>
Try to reload orgmode:
</p>
<pre class="example">
C-c C-x !
</pre>


<p>
Or this solution sometimes: 
</p>
<pre class="example">
C-U M-x org-reload
</pre>
</div>
</div>


<div id="outline-container-org331b77c" class="outline-2">
<h2 id="org331b77c"><span class="section-number-2">4</span> Publishing</h2>
<div class="outline-text-2" id="text-4">
<p>
In the .emacs file I added the following code: 
</p>

<div class="org-src-container">
<pre class="src src-lisp">(setq org-publish-project-alist
      '(

  (<span style="color: #ffa07a;">"org-alex"</span>
          <span style="color: #ff7f24;">;; </span><span style="color: #ff7f24;">Path to your org files.</span>
          <span style="color: #b0c4de;">:base-directory</span> <span style="color: #ffa07a;">"~/Sites/org/homepages"</span>
          <span style="color: #b0c4de;">:base-extension</span> <span style="color: #ffa07a;">"org"</span>

          <span style="color: #ff7f24;">;; </span><span style="color: #ff7f24;">Path to your Jekyll project.</span>
          <span style="color: #b0c4de;">:publishing-directory</span> <span style="color: #ffa07a;">"~/Sites/jekyll/homepages"</span>
          <span style="color: #b0c4de;">:recursive</span> t
          <span style="color: #b0c4de;">:publishing-function</span> org-jekyll-publish-to-html
          <span style="color: #b0c4de;">:headline-levels</span> 4 
          <span style="color: #b0c4de;">:html-extension</span> <span style="color: #ffa07a;">"html"</span>
    )


    (<span style="color: #ffa07a;">"org-static-alex"</span>
          <span style="color: #b0c4de;">:base-directory</span> <span style="color: #ffa07a;">"~/Sites/org/homepages"</span>
          <span style="color: #b0c4de;">:base-extension</span> <span style="color: #ffa07a;">"css\\|js\\|png\\|jpg\\|gif\\|pdf\\|mp3\\|ogg\\|swf\\|php"</span>
          <span style="color: #b0c4de;">:publishing-directory</span> <span style="color: #ffa07a;">"~/Sites/jekyll"</span>
          <span style="color: #b0c4de;">:recursive</span> t
          <span style="color: #b0c4de;">:publishing-function</span> org-publish-attachment)

    (<span style="color: #ffa07a;">"aa"</span> <span style="color: #b0c4de;">:components</span> (<span style="color: #ffa07a;">"org-alex"</span> <span style="color: #ffa07a;">"org-static-alex"</span>))

))
</pre>
</div>
<p>
Then just type : 
</p>
<pre class="example">
C-c-e P x aa (where aa is the project name)
</pre>

<p>
The code is derived from <a href="http://orgmode.org/worg/org-tutorials/org-jekyll.html">org-jekyll page</a>. 
</p>


<p>
Then just another shortcut : 
</p>
<div class="org-src-container">
<pre class="src src-lisp">(<span style="color: #00ffff;">defun</span> <span style="color: #87cefa;">sdf</span>
  ()
<span style="color: #ffa07a;">"Insert a settings template for Jekyll exporter."</span>
(interactive)
(org-publish-project <span style="color: #ffa07a;">"aa"</span> )
(compile <span style="color: #ffa07a;">"cd ~/Sites/jekyll/homepages; bundle exec jekyll build; "</span>)
)  
</pre>
</div>
</div>
</div>





<div id="outline-container-org7c4a36e" class="outline-2">
<h2 id="org7c4a36e"><span class="section-number-2">5</span> Latex</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgd38ac92" class="outline-3">
<h3 id="orgd38ac92"><span class="section-number-3">5.1</span> Equation</h3>
<div class="outline-text-3" id="text-5-1">
<p>
To use MathJax to export latex equation just add the following option: 
</p>
<pre class="example">
#+HTML_MATHJAX: align: left indent: 5em tagside: left font: Neo-Euler
</pre>

<p>
Then you can write (and get) things like that: 
</p>
<blockquote>
\begin{equation}
     x=\sqrt{b} \
\end{equation}
</blockquote>
</div>
</div>

<div id="outline-container-org456c595" class="outline-3">
<h3 id="org456c595"><span class="section-number-3">5.2</span> Latex definition (for both html/jekyll and latex export)</h3>
<div class="outline-text-3" id="text-5-2">
<p>
To use some latex definition (<i>i.e</i> newcommand, or def), you can download the file <i>define.setup</i> from this <a href="https://github.com/bcw/org-tex-define">repository</a> and then follow the instruction. This solution worked fine for me until recently (and a change + update of emacs,org, &#x2026; messy things). And I did not find the solution to make it work again. 
</p>

<p>
The more recent solution is to use a file (defmath.org somewhere) with your definitions written like this: 
</p>

<pre class="example">
:LATEXMACROS:
@@html:&lt;div style="display: none"&gt;@@
\(
\global\def\normal{\mathcal{N}}
\global\newcommand\lsrc{I}
\)
@@html:&lt;/div&gt;@@
:END:
</pre>



<p>
The solution comes from one answer <a href="https://stackoverflow.com/questions/12717654/customizing-org-mode-exports">on this stackoverflow question</a>. There are maybe better solutions. But this one works for me. 
</p>
</div>
</div>
</div>






<div id="outline-container-org0590ac9" class="outline-2">
<h2 id="org0590ac9"><span class="section-number-2">6</span> Bibtex</h2>
<div class="outline-text-2" id="text-6">
<p>
There are some steps to follow if you want to use bibtex references in
an org file for a further export. 
</p>
</div>

<div id="outline-container-org434f55d" class="outline-3">
<h3 id="org434f55d"><span class="section-number-3">6.1</span> The "pdf to latex" process</h3>
<div class="outline-text-3" id="text-6-1">
<p>
First in you dot emacs file : 
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #00ffff;">setq</span> org-latex-pdf-process (list <span style="color: #ffa07a;">"latexmk -pdf %f"</span>))
</pre>
</div>
<p>
You can us another tool than latexmf but it is more convenient since it deals with the compilation of bibtex files. But if you really want to go back to bibtex: 
</p>
<div class="org-src-container">
<pre class="src src-elisp">(<span style="color: #00ffff;">setq</span> org-latex-pdf-process
      '(<span style="color: #ffa07a;">"pdflatex -interaction nonstopmode -output-directory %o %f"</span>
        <span style="color: #ffa07a;">"bibtex %b"</span>
        <span style="color: #ffa07a;">"pdflatex -interaction nonstopmode -output-directory %o %f"</span>
        <span style="color: #ffa07a;">"pdflatex -interaction nonstopmode -output-directory %o %f"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeaca59e" class="outline-3">
<h3 id="orgeaca59e"><span class="section-number-3">6.2</span> in your orgfile</h3>
<div class="outline-text-3" id="text-6-2">
<p>
Start with the header: 
</p>
<pre class="example">
#+LATEX_HEADER: \usepackage[natbib=true]{biblatex} \DeclareFieldFormat{apacase}{#1} \addbibresource{/path/my_refs.bib}
</pre>


<p>
Then add a block anywhere you want in the orgfile 
:#+begin<sub>src</sub> bibtex :exports none :tangle "/path/my<sub>refs.bib</sub>"
:@article{Blei03LDA,
:	Author = {Blei, D. M. and Ng, A. Y. and Jordan, M. I.},
:	Journal = {Journal of Machine Learning Research},
:	Pages = {993&#x2013;1022},
:	Title = {Latent dirichlet allocation},
:	Volume = {3},
:	Year = {2003}}
#:+end<sub>src</sub>
</p>

<p>
the important points: 
</p>
<ul class="org-ul">
<li><b><b>:exports none</b></b>: does not export the block of code, so it won't appear in the latex and pdf files</li>
<li><b><b>:tangle:  "/path/my<sub>refs.bib</sub>"</b></b>: when we will use tangle to extract the bibtex entry, it will be written in the specified file.</li>
</ul>
</div>
</div>

<div id="outline-container-org6201b87" class="outline-3">
<h3 id="org6201b87"><span class="section-number-3">6.3</span> export</h3>
<div class="outline-text-3" id="text-6-3">
<p>
To export the file, we need to first to tangle the bibtex entries: 
</p>
<pre class="example">
C-c C-v t
</pre>

<p>
Then run the latex export 
</p>
<pre class="example">
C-c C-e l p 
</pre>


<p>
The first step is only required when you add/remove/modify the bibtex entries. 
</p>
</div>
</div>
</div>



<div id="outline-container-org8f35167" class="outline-2">
<h2 id="org8f35167"><span class="section-number-2">7</span> Setting the path : find the right latex and other useful tools</h2>
<div class="outline-text-2" id="text-7">
<p>
Add in the <i>.emacs</i> file: 
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #ff7f24;">;; </span><span style="color: #ff7f24;">to find the right latex install </span>
(<span style="color: #00ffff;">defun</span> <span style="color: #87cefa;">set-exec-path-from-shell-PATH</span> ()
  <span style="color: #ffa07a;">"Sets the exec-path to the same value used by the user shell"</span>
  (<span style="color: #00ffff;">let</span> ((path-from-shell
         (replace-regexp-in-string
          <span style="color: #ffa07a;">"[[:space:]\n]*$"</span> <span style="color: #ffa07a;">""</span>
          (shell-command-to-string <span style="color: #ffa07a;">"$SHELL -l -c 'echo $PATH'"</span>))))
    (setenv <span style="color: #ffa07a;">"PATH"</span> path-from-shell)
    (setq exec-path (split-string path-from-shell path-separator))))

(set-exec-path-from-shell-PATH)
</pre>
</div>
</div>
</div>













<div id="outline-container-org1ad43ec" class="outline-2">
<h2 id="org1ad43ec"><span class="section-number-2">8</span> Examples</h2>
<div class="outline-text-2" id="text-8">
<ul class="org-ul">
<li><a href="http://www.i3s.unice.fr/~malapert/emacs_orgmode.html">http://www.i3s.unice.fr/~malapert/emacs_orgmode.html</a></li>
<li>a lot of nice org tricks (bibtex, code, &#x2026; ) : <a href="http://cachestocaches.com/series/emacs-productivity/">http://cachestocaches.com/series/emacs-productivity/</a></li>
</ul>
</div>
</div>
