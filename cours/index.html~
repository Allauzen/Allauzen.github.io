---
title: "Cours"
date: 2022-01-02
layout: page
categories: 
tags: 
- cours
published: true
comments: 
---
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org94d389c">2022 Exec-IASD, NLP course</a></li>
<li><a href="#org1b87c70">2022 3A ESPCI Introduction to Deep-Learning (IDL)</a></li>
<li><a href="#org7bca180">Misc</a>
<ul>
<li><a href="#org722f74c">Python, ipython, notebook, &#x2026;</a></li>
<li><a href="#org9d233e2">The MNIST database</a>
<ul>
<li><a href="#org00fc9e3">Java</a></li>
<li><a href="#org5d03cb5">In python</a></li>
<li><a href="#org808cabf">In Matlab/Octave</a></li>
</ul>
</li>
<li><a href="#org5b525f7">Random en python</a></li>
</ul>
</li>
</ul>
</div>
</div>
<hr>



<div id="outline-container-org94d389c" class="outline-2">
<h2 id="org94d389c">2022 Exec-IASD, NLP course</h2>
<div class="outline-text-2" id="text-org94d389c">
<p>
The drive <a href="https://drive.google.com/drive/folders/1vT1HxkwhMHWyT4r_XkQB0h4DQ6O9BRHS?usp=sharing">associated to this course is here</a>. You will find the slides, the notebooks for lab-sessions and more. 
</p>

<p>
The expected schedules are: 
</p>
<ul class="org-ul">
<li>Session 1 : April 5</li>
<li>Session 2 : April 6</li>
</ul>
</div>
</div>



<div id="outline-container-org1b87c70" class="outline-2">
<h2 id="org1b87c70">2022 3A ESPCI <a href="https://allauzen.github.io/cours/IDL_ESPCI">Introduction to Deep-Learning (IDL)</a></h2>
<div class="outline-text-2" id="text-org1b87c70">
<p>
<a href="https://allauzen.github.io/cours/IDL_ESPCI">Introduction to Deep-Learning (IDL)</a>: the webpage for the third year: schedules, resources, news, &#x2026; . <a href="https://drive.google.com/drive/folders/1G8It4N3Wlxp6kXzVKwmQ8wCZ-rIdROGG?usp=sharing">Look at this drive</a> for the slides, the material of lab sessions, homework, &#x2026; 
</p>
</div>
</div>







<div id="outline-container-org7bca180" class="outline-2">
<h2 id="org7bca180">Misc</h2>
<div class="outline-text-2" id="text-org7bca180">
</div>
<div id="outline-container-org722f74c" class="outline-3">
<h3 id="org722f74c">Python, ipython, notebook, &#x2026;</h3>
<div class="outline-text-3" id="text-org722f74c">
<p>
Here are a few links to learn python. The best is the free book <a href="http://www.diveintopython.net/toc/index.html">Dive in python</a> that covers the basics and essentials.
</p>

<p>
Otherwise (<b>in French</b>) the wiki site <a href="http://fr.wikibooks.org/wiki/Apprendre_%C3%A0_programmer_avec_Python">Apprendre à  programmer en python</a>. And of course don't forget to take a look to the standard documentation in <a href="http://www.afpy.org/doc/python/2.7/tutorial/index.html">French</a> or in <a href="https://docs.python.org/2/tutorial/index.html">in English</a>
</p>

<p>
Numpy is the core library for scientific computing in Python. It
provides a high-performance multidimensional array object, and tools for
working with these arrays.
</p>

<ul class="org-ul">
<li>A quick introduction to python and numpy and matplotlib:
<a href="http://cs231n.github.io/python-numpy-tutorial/">http://cs231n.github.io/python-numpy-tutorial/</a></li>
<li>If you are already familiar with MATLAB:
<a href="http://scipy.github.io/old-wiki/pages/NumPy_for_Matlab_Users">http://scipy.github.io/old-wiki/pages/NumPy_for_Matlab_Users</a></li>
<li>And for R users : <a href="http://mathesaurus.sourceforge.net/r-numpy.html">http://mathesaurus.sourceforge.net/r-numpy.html</a></li>
</ul>

<p>
Using python can be easier with ipython, look at this tutorial: <a href="http://cs231n.github.io/ipython-tutorial/">http://cs231n.github.io/ipython-tutorial/</a>
</p>
</div>
</div>

<div id="outline-container-org9d233e2" class="outline-3">
<h3 id="org9d233e2">The MNIST database</h3>
<div class="outline-text-3" id="text-org9d233e2">
<p>
The <a href="http://yann.lecun.com/exdb/mnist/">official web page</a> of this corpus provides more details. A specific version of the database that is suited for python can be <a href="http://perso.limsi.fr/~allauzen/data/mnist.pkl.gz">downloaded</a> as well.
</p>
</div>

<div id="outline-container-org00fc9e3" class="outline-4">
<h4 id="org00fc9e3">Java</h4>
<div class="outline-text-4" id="text-org00fc9e3">
<p>
To read this data, you will find below an example and you can download
this <i>jar</i> file
<a href="http://perso.limsi.fr/Individu/allauzen/VA/mnist-tools.jar">here</a>.
</p>

<div class="org-src-container">
<pre class="src src-java"><span style="color: #00ffff;">public</span> <span style="color: #00ffff;">class</span> <span style="color: #98fb98;">LectureImage</span> {
    <span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #98fb98;">void</span> <span style="color: #87cefa;">main</span>(<span style="color: #98fb98;">String</span>[] <span style="color: #eedd82;">args</span>) {
            <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">path</span>=<span style="color: #ffa07a;">"/Users/allauzen/cours/l2/VA/tps/mnist/"</span>;
            <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">labelDB</span>=path+<span style="color: #ffa07a;">"train-labels-idx1-ubyte"</span>;
            <span style="color: #98fb98;">String</span> <span style="color: #eedd82;">imageDB</span>=path+<span style="color: #ffa07a;">"train-images-idx3-ubyte"</span>;
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Database creation</span>
            <span style="color: #98fb98;">MnistReader</span> <span style="color: #eedd82;">db</span> = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">MnistReader</span>(labelDB, imageDB);
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Acces to the first image </span>
            <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">idx</span> = 1; <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">one variable to store the image index</span>
                        <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Warning: index starts at 1. </span>
            <span style="color: #98fb98;">int</span> [][] <span style="color: #eedd82;">image</span> = db.getImage(idx);
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Acces to the corresponding label </span>
            <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">label</span> = db.getLabel(idx);
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Display the label</span>
            System.out.println(<span style="color: #ffa07a;">"Le label est "</span>+ label);
            <span style="color: #ff7f24;">// </span><span style="color: #ff7f24;">Print the total number of images.</span>
            System.out.println(<span style="color: #ffa07a;">"Le total est "</span>+ db.getTotalImages());       
            <span style="color: #ff7f24;">/*  </span><span style="color: #ff7f24;">Here you can write your own code*/</span>
        }
</pre>
</div>


<p>
If you want to convert an image which is a matrix in a simple array:
(:codestart java:)
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="color: #00ffff;">public</span> <span style="color: #00ffff;">static</span> <span style="color: #98fb98;">float</span>[] <span style="color: #87cefa;">image2Array</span>(<span style="color: #98fb98;">int</span>[][] <span style="color: #eedd82;">image</span>){
        <span style="color: #98fb98;">float</span>[] <span style="color: #eedd82;">x</span>  = <span style="color: #00ffff;">new</span> <span style="color: #98fb98;">float</span>[image.length*image[0].length+1];
        x[0] = 1;
        <span style="color: #00ffff;">for</span> (<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">i</span> = 0; i &lt; image.<span style="color: #98fb98;">length</span>; i++) {
            <span style="color: #00ffff;">for</span> (<span style="color: #98fb98;">int</span> <span style="color: #eedd82;">j</span> = 0; j &lt; <span style="color: #98fb98;">image</span>[0].length; j++) {
                <span style="color: #98fb98;">int</span> <span style="color: #eedd82;">k</span> = image.length*i+j+1;
                x[k]=image[i][j];
            }
        }
        <span style="color: #00ffff;">return</span> x;
    }
</pre>
</div>
</div>
</div>

<div id="outline-container-org5d03cb5" class="outline-4">
<h4 id="org5d03cb5">In python</h4>
<div class="outline-text-4" id="text-org5d03cb5">
<p>
In python 2: 
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #00ffff;">import</span> cPickle, gzip, numpy
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">Load the dataset</span>
<span style="color: #eedd82;">f</span> = gzip.<span style="color: #b0c4de;">open</span>(<span style="color: #ffa07a;">'mnist.pkl.gz'</span>, <span style="color: #ffa07a;">'rb'</span>) 
<span style="color: #eedd82;">train_set</span>, <span style="color: #eedd82;">valid_set</span>, <span style="color: #eedd82;">test_set</span> = cPickle.load(f) 
f.close()
</pre>
</div>
<p>
While in python 3: 
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #00ffff;">import</span> pickle, gzip, numpy
<span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">Load the dataset</span>
<span style="color: #eedd82;">f</span> = gzip.<span style="color: #b0c4de;">open</span>(<span style="color: #ffa07a;">'./mnist.pkl.gz'</span>, <span style="color: #ffa07a;">'rb'</span>)
<span style="color: #eedd82;">u</span> = pickle._Unpickler(f)
<span style="color: #eedd82;">u.encoding</span> = <span style="color: #ffa07a;">'latin1'</span>
<span style="color: #eedd82;">p</span> = u.load()
<span style="color: #eedd82;">train_set</span>, <span style="color: #eedd82;">valid_set</span>, <span style="color: #eedd82;">test_set</span> = p
</pre>
</div>

<p>
Each set (train, valid and test) is an array that contains two objects:
</p>

<ul class="org-ul">
<li>An array of images, each image is itself an array of 784 values
(gray scale between 0 and 1)</li>
<li>An array of integers that encode the corresponding labels</li>
</ul>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #eedd82;">im</span> = train_set[0][0]      <span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">the first image </span>
<span style="color: #eedd82;">im</span> = numpy.append([1.],im) <span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">add one component </span>
<span style="color: #eedd82;">label</span> = train_set[1][0]  <span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">its label </span>
numpy.dot(w,im)            <span style="color: #ff7f24;"># </span><span style="color: #ff7f24;">the dot product of the image with a </span>
                           <span style="color: #ff7f24;">#</span><span style="color: #ff7f24;">vector  of the same size.</span>
</pre>
</div>
<p>
If you want to display an image 
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #00ffff;">import</span> matplotlib.pyplot <span style="color: #00ffff;">as</span> plt 
<span style="color: #eedd82;">im</span> = train_set[0][0].reshape(28,28) 
plt.show()
plt.imshow(im.reshape(28,28) , plt.cm.gray) 
</pre>
</div>
</div>
</div>

<div id="outline-container-org808cabf" class="outline-4">
<h4 id="org808cabf">In Matlab/Octave</h4>
<div class="outline-text-4" id="text-org808cabf">
<p>
See the following web page for a detailed
<a href="http://ufldl.stanford.edu/wiki/index.php/Using_the_MNIST_Dataset">example</a>.
</p>
</div>
</div>
</div>

<div id="outline-container-org5b525f7" class="outline-3">
<h3 id="org5b525f7">Random en python</h3>
<div class="outline-text-3" id="text-org5b525f7">
<p>
Les bases du tirage aléatoire en python: 
</p>
<pre class="example">
import random 
random.random()      # retourne un rÃ©el entre 0 et 1
random.randint(5,10) # retourne un entier entre 5 et 10
ids = range(10)      # =&gt; [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
random.shuffle(ids)  # mÃ©lange le tout 
</pre>

<p>
Pour tirer une valeur selon une distribution multinomiale (discrète):
</p>
<pre class="example">
import numpy.random as npr 
l = npr.multinomial(nsample,probs)
</pre>
<p>
<b>l</b> est alors une liste contenant <b>nsample</b> tirage selon la distribution de probabilité <b>probs</b>
</p>
</div>
</div>
</div>
